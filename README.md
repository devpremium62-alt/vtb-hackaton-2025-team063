# Family Multibank

## Описание проекта
Family Multibank — цифровая экосистема для совместного управления финансами семьи. Решение объединяет счета партнеров, автоматизирует планирование расходов и делает финансовые цели прозрачными. Команда концентрируется на фундаментальных сценариях: синхронизация банковских данных, единый дашборд с ключевыми метриками, совместное планирование и управление регулярными платежами.

## Основные возможности продукта

### 1. Единое пространство для двоих (фундамент)
- Приглашение партнера по ссылке или номеру телефона.
- Настройка прав доступа и подтверждение подключения карт.
- Синхронизированное отображение счетов и операций.

### 2. Виджет «Общий баланс» (картина целиком)
- Сводная сумма остатков по всем подключенным счетам пары.
- Отображение динамики ежемесячных поступлений.
- Быстрый ориентир «сколько у нас сейчас денег» без переключения между банками.

### 3. Виджет «Наши цели» (планирование)
- Общие цели с прогресс-барами (например, «Отпуск: 25 000 / 100 000 ₽»).
- Отдельное отображение дедлайнов и сумм накоплений.
- Отражение эмоциональной мотивации — видно, ради чего копят средства.

#### 3.1. Быстрые шаблоны целей (ускорение онбординга)
- Готовые преднастроенные цели: «Отпуск на море: 150 000 ₽», «Ремонт кухни: 300 000 ₽».
- Динамические шаблоны с калькулятором (например, «Финансовая подушка»).
- Помогают пользователям стартовать без ручного ввода.

### 4. Виджет «На что тратим» с умной категоризацией
- Кольцевая диаграмма или столбчатый график с распределением расходов по категориям.
- Автоматическая категоризация по MCC-кодам с возможностью перетаскивания транзакций между категориями.
- Фильтры по периодам и участникам («Все», «Мои траты», «Траты партнера»).
- Мгновенная переоценка бюджета при ручных корректировках.

### 5. Разделение трат «Муж/Жена»
- Фильтр в аналитике без показа детальных транзакций (только суммы).
- Помогает вести диалог о тратах без конфликта — каждый видит свой вклад в общий бюджет.
- В дальнейшем могут появиться персональные рекомендации по экономии.

### 6. «Общие кошельки» с умным пополнением
- Виртуальные кошельки для регулярных статей («Коммунальные услуги», «Продукты и быт»).
- Автоматическое пополнение по правилам (дата, сумма, источник списания).
- Возможность мгновенного ручного пополнения при необходимости.
- Прозрачный статус: ожидаемые списания, история пополнений, уведомления.

### 7. Гибкая аналитика с перетаскиванием транзакций
- Drag-and-drop для изменения категории операции.
- Система обучается на пользовательских корректировках и переименовывает повторяющиеся платежи.
- Усиливает доверие пользователей и демонстрирует контроль над данными.

### 8. Единый «Календарь платежей»
- Виджет «Платежи на месяц» с датами, суммами и статусами («Оплачено», «Ожидается», «Просрочено»).
- Помогает не забывать о регулярных обязательствах и снижает стресс.
- В связке с общими кошельками формирует проактивное управление бюджетом.

## Архитектура и стек

| Слой | Технологии | Назначение |
| --- | --- | --- |
| Frontend | Next.js 16, React 19, Tailwind CSS 4, @tanstack/react-query | Интерактивный интерфейс дашборда, виджеты, работа с API |
| Backend | Django 4.2, Django REST Framework, Celery, Redis | Агрегация банковских данных, бизнес-логика кошельков и целей, очереди задач |
| База данных | PostgreSQL 15 | Хранение счетов, целей, транзакций и пользователей |
| Инфраструктура | Docker, docker-compose | Изолированное окружение для разработки и демонстрации |

## Структура репозитория

- [`backend/`](backend/) — Django-проект с приложениями `accounts`, `banks`, `payments`, `products`.
- [`frontend/`](frontend/) — Next.js-приложение с модульной структурой (app directory, widgets, entities).
- [`docker-compose.yml`](docker-compose.yml:1) — общий оркестратор для фронтенда, бэкенда, Postgres и Redis.
- [`backend/docker-compose.yml`](backend/docker-compose.yml:1) — отдельный compose-файл для разработки бэкенда.
- [`backend/postgres/init.sql`](backend/postgres/init.sql:1) — инициализация схемы и базовых данных.

## Запуск проекта

### Быстрый старт через Docker
1. Убедитесь, что установлены Docker и Docker Compose.
2. В корне репозитория выполните:
   ```bash
   docker-compose up --build
   ```
3. Доступ к сервисам:
   - Frontend: http://localhost:3000
   - Backend API: http://localhost:8000
   - Postgres: `localhost:5432` (`postgres` / `postgres`)
   - Redis: `localhost:6379`

### Локальная разработка (без Docker)

#### Backend
```bash
cd backend
python -m venv .venv
.venv\Scripts\activate
pip install -r requirements.txt
python manage.py migrate
python manage.py runserver
```

#### Frontend
```bash
cd frontend
npm install
npm run dev
```

Настройки окружения задаются через `.env` файлы (`backend/.env`, `frontend/.env.local`).

## Сценарий демо
1. Пользователь получает приглашение и подключает партнера.
2. На дашборде отображается общий баланс и разделение счетов по владельцам.
3. Пара создает общую цель «Отпуск», используя шаблон, и видит прогресс.
4. В виджете «На что тратим» отображается структура расходов, пользователь вручную корректирует категорию.
5. В «Общих кошельках» настроено автопополнение на коммунальные платежи.
6. В календаре видны предстоящие платежи; при приближении срока система уведомляет о лимите по категории.

## Интеграция с банковскими API
- Конфигурация подключений хранится в [`backend/multibank_backend/settings.py`](backend/multibank_backend/settings.py:117).
- Для каждого банка настраиваются `client_id` и `client_secret`, поддерживается расширение списка банков.

## Планы развития (roadmap)
- Финансовый советник по достижению целей и инвестиционные рекомендации.
- Расширенные теги и собственные категории расходов.
- Управление подписками и автоматические предложения по их отмене.
- Детские счета с родительским контролем и обучающими сценариями.
- Расшифровка непонятных транзакций («Что это?») и база MCC-описаний.
- Предупреждения по лимитам: «На продуктах осталось 2 000 ₽ до конца недели».

## Команда и вклад
Для получения доступа к презентации и дополнительным материалам обратитесь к команде vtb-hackaton-2025-team063. Pull requests приветствуются: сформулируйте задачу, опишите тесты и ожидаемый результат.
